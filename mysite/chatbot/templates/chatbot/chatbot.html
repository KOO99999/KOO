<!DOCTYPE html>
<html lang="ko">
<head>
  {% load static %}
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI 상담</title>

  <!-- ✅ 챗봇 전용: 이 페이지에서만 Bootstrap 로드 (홈과 분리) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"/>

  <!-- 챗봇 전용 스타일 -->
  <link rel="stylesheet" href="{% static 'chatbot/chatbot.css' %}">
</head>
<body class="chatbot-body-bg">

<!-- 모달 열기 FAB (옵션) -->
<button class="fab-open" data-bs-toggle="modal" data-bs-target="#chatbotModal" title="AI 상담 열기" aria-label="AI 상담 열기">
  <svg viewBox="0 0 24 24" aria-hidden="true">
    <path d="M11 2a1 1 0 1 1 2 0v1h2.5a2.5 2.5 0 0 1 0 5H14v1h2a3 3 0 0 1 3 3v4a4 4 0 0 1-4 4H9a4 4 0 0 1-4-4v-4a3 3 0 0 1 3-3h2V8H8.5a2.5 2.5 0 1 1 0-5H11V2Zm-1 10.5a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0Z"/>
  </svg>
</button>

<!-- ✅ 챗봇 모달 -->
<div class="modal fade" id="chatbotModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content chatbot-container">

      <div class="modal-header">
        <div class="modal-title"><i class="bi bi-robot"></i> CHATBOT</div>
        <div class="header-actions">
          <button class="icon-btn" type="button" id="reset-btn" title="지우기">
            <i class="bi bi-trash"></i>
          </button>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" title="닫기"></button>
        </div>
      </div>

      <div class="chatbot-body" id="chat-body">
        <div class="msg bot">
          <div class="avatar" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M11 2a1 1 0 1 1 2 0v1h2.5a2.5 2.5 0 0 1 0 5H14v1h2a3 3 0 0 1 3 3v4a4 4 0 0 1-4 4H9a4 4 0 0 1-4-4v-4a3 3 0 0 1 3-3h2V8H8.5a2.5 2.5 0 1 1 0-5H11V2Zm-1 10.5a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0Z"/>
            </svg>
          </div>
          <div class="chat-message bot-message">
            시작할 상담 유형을 선택해주세요.
            <div class="chip-row" id="mode-chips">
              <button class="chip" onclick="chooseMode('geo')">위치기반 추천</button>
              <button class="chip" onclick="chooseMode('chat')">챗봇 추천</button>
            </div>
          </div>
        </div>
      </div>

      <div class="chatbot-footer">
        <div class="input-wrap">
          <button class="attach-inside disabled" type="button" id="attach-btn" title="사진 첨부">
            <i class="bi bi-paperclip"></i>
          </button>
          <input type="file" id="file-input" accept="image/*" class="d-none" />
          <input type="text" id="chat-input" class="form-control input-disabled" placeholder="상담 유형을 먼저 선택하세요" disabled />
          <button class="send-btn disabled" id="send-btn" title="전송"><i class="bi bi-send-fill"></i></button>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'chatbot/chatbot.js' %}"></script>

<script>
  // 페이지 진입 시 자동으로 모달 열고 싶으면 주석 해제
  // new bootstrap.Modal(document.getElementById('chatbotModal')).show();
</script>
</body>
</html>
